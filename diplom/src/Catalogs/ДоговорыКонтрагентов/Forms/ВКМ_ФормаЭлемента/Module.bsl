#Область ОбработчикиСобытийФормы

&НаСервере
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)
	
	Если Элементы.Найти("СуммаАбонентскойПлаты") = Неопределено Тогда
		
			НовыйЭлемент = Элементы.Добавить("СуммаАбонентскойПлаты", Тип("ПолеФормы"));
			НовыйЭлемент.ПутьКДанным = "Объект.ВКМ_СуммаАбонентскойПлаты";
			НовыйЭлемент.Вид = ВидПоляФормы.ПолеВвода;
			НовыйЭлемент.Заголовок = "Сумма абонентской платы";
			
	КонецЕсли;
	
	Если Элементы.Найти("СтоимостьЧасаРаботы") = Неопределено Тогда
        
            НовыйЭлемент = Элементы.Добавить("СтоимостьЧасаРаботы", Тип("ПолеФормы"));
            НовыйЭлемент.ПутьКДанным = "Объект.ВКМ_СтоимостьЧасаРаботы";
            НовыйЭлемент.Вид = ВидПоляФормы.ПолеВвода;
            НовыйЭлемент.Заголовок = "Стоимость часа работы";
            
	КонецЕсли;
	
	ГруппаПериод = Элементы.Добавить("ГруппаПериод", Тип("ГруппаФормы"), ЭтотОбъект);
	ГруппаПериод.Вид = ВидГруппыФормы.ОбычнаяГруппа;
	ГруппаПериод.Группировка = ГруппировкаПодчиненныхЭлементовФормы.ГоризонтальнаяВсегда;
	ГруппаПериод.ОтображатьЗаголовок = Ложь;
	ГруппаПериод.Отображение = ОтображениеОбычнойГруппы.Нет;
	
    Если Элементы.Найти("НачалоДействияДоговора") = Неопределено Тогда
        
            НовыйЭлемент = Элементы.Добавить("НачалоДействияДоговора", Тип("ПолеФормы"));
            НовыйЭлемент.ПутьКДанным = "Объект.ВКМ_НачалоДействияДоговора";
            НовыйЭлемент.Вид = ВидПоляФормы.ПолеВвода;
            НовыйЭлемент.Заголовок = "Начало действия договора";
            
    КонецЕсли;
    
    Если Элементы.Найти("ОкончаниеДействияДоговора") = Неопределено Тогда
        
            НовыйЭлемент = Элементы.Добавить("ОкончаниеДействияДоговора", Тип("ПолеФормы"));
            НовыйЭлемент.ПутьКДанным = "Объект.ВКМ_ОкончаниеДействияДоговора";
            НовыйЭлемент.Вид = ВидПоляФормы.ПолеВвода;
            НовыйЭлемент.Заголовок = "Окончание действия договора";
            
    КонецЕсли;
    
    Элементы.ВидДоговора.УстановитьДействие("ПриИзменении", "ВидДоговораПриИзменении");
	
    ВывестиЭлементыНаФорму(ЭтотОбъект);

КонецПроцедуры

#КонецОбласти

#Область СлужебныеПроцедурыИФункции

&НаКлиенте
Процедура ВидДоговораПриИзменении(Элемент)
    
    ВывестиЭлементыНаФорму(ЭтотОбъект);

КонецПроцедуры

&НаКлиентеНаСервереБезКонтекста
Процедура ВывестиЭлементыНаФорму(Форма)
    
    Если Форма.Объект.ВидДоговора = ПредопределенноеЗначение("Перечисление.ВидыДоговоровКонтрагентов.ВКМ_АбоненскоеОбслуживание") Тогда

        Форма.Элементы.СуммаАбонентскойПлаты.Видимость = Истина;
        Форма.Элементы.СтоимостьЧасаРаботы.Видимость = Истина;
        Форма.Элементы.НачалоДействияДоговора.Видимость = Истина;
        Форма.Элементы.ОкончаниеДействияДоговора.Видимость = Истина;
        
    Иначе
        
        Форма.Элементы.СуммаАбонентскойПлаты.Видимость = Ложь;
        Форма.Элементы.СтоимостьЧасаРаботы.Видимость = Ложь;
        Форма.Элементы.НачалоДействияДоговора.Видимость = Ложь;
        Форма.Элементы.ОкончаниеДействияДоговора.Видимость = Ложь;
        
    КонецЕсли;
 
КонецПроцедуры

#КонецОбласти